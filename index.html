<script>
  const pilots = [
    {
      prenom: "Jocelyn",
      nom: "Maury",
      palmares: [
        "Champion F1 DriveX S1",
        "4ème place Endurance 24h DriveX",
        "Vice-champion F2 DriveX S2"
      ],
      blacklist: false
    },
    {
      prenom: "Melvin",
      nom: "Castilla",
      palmares: [
        "Vice-champion F1 DriveX S1",
        "Champion Sprint Cup 2024"
      ],
      blacklist: true,
      raison: "Comportement toxique récurrent"
    },
    {
      prenom: "Rowan",
      nom: "Deverre",
      palmares: [
        "3ème place F1 DriveX S1"
      ],
      blacklist: false
    }
  ];

  function showSuggestions() {
    const input = document.getElementById('searchInput').value.toLowerCase();
    const suggestionBox = document.getElementById('suggestions');
    suggestionBox.innerHTML = '';

    const matches = pilots.filter(pilot =>
      pilot.nom.toLowerCase().startsWith(input) ||
      pilot.prenom.toLowerCase().startsWith(input)
    );

    if (matches.length === 0 || input.length < 1) {
      suggestionBox.style.display = 'none';
      return;
    }

    suggestionBox.style.display = 'block';

    matches.forEach(pilot => {
      const item = document.createElement('div');
      item.className = 'suggestion-item';
      item.innerText = `${pilot.prenom} ${pilot.nom}`;
      item.onclick = () => {
        document.getElementById('searchInput').value = `${pilot.prenom} ${pilot.nom}`;
        suggestionBox.innerHTML = '';
        suggestionBox.style.display = 'none';
        searchPilot();
      };
      suggestionBox.appendChild(item);
    });
  }

  function searchPilot() {
    const input = document.getElementById('searchInput').value.toLowerCase().trim();
    const resultBox = document.getElementById('resultBox');
    const suggestionBox = document.getElementById('suggestions');
    suggestionBox.innerHTML = '';
    suggestionBox.style.display = 'none';
    resultBox.innerHTML = '';

    const found = pilots.find(p =>
      `${p.prenom.toLowerCase()} ${p.nom.toLowerCase()}` === input
    );

    if (found) {
      resultBox.innerHTML = `
        <div class="result-box">
          <h2>${found.prenom} ${found.nom}</h2>
          <p><strong>Palmarès :</strong></p>
          <ul>
            ${found.palmares.map(item => `<li>${item}</li>`).join('')}
          </ul>
          ${found.blacklist ? `<p class="blacklist">Blacklisté : ${found.raison}</p>` : ``}
        </div>
      `;
    } else {
      resultBox.innerHTML = `
        <div class="result-box">
          <p>Aucun pilote trouvé avec ce nom.</p>
        </div>
      `;
    }
  }
</script>
